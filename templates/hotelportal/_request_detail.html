{# Full details for the popup on Live Board #}
<div>
  <div class="d-flex justify-content-between align-items-start mb-2">
    <h5 class="mb-0">Request #{{ r.id }} — Room {{ r.room.number }}</h5>
    <span class="badge {% if r.kind == 'FOOD' %}text-bg-primary{% else %}text-bg-info{% endif %}">
      {{ r.get_kind_display }}
    </span>
  </div>

  <div class="mb-2">
    <span class="badge text-bg-secondary">{{ r.get_status_display }}</span>
  </div>

  <dl class="row small">
    <dt class="col-4">Created</dt><dd class="col-8">{{ r.created_at|date:"d M Y, H:i" }}</dd>
    {% if r.accepted_at %}<dt class="col-4">Accepted</dt><dd class="col-8">{{ r.accepted_at|date:"d M Y, H:i" }}</dd>{% endif %}
    {% if r.completed_at %}<dt class="col-4">Completed</dt><dd class="col-8">{{ r.completed_at|date:"d M Y, H:i" }}</dd>{% endif %}
    {% if r.cancelled_at %}<dt class="col-4">Cancelled</dt><dd class="col-8">{{ r.cancelled_at|date:"d M Y, H:i" }}</dd>{% endif %}
  </dl>

  {% if r.kind == "FOOD" %}
    <h6 class="mt-3">Items</h6>
    <ul class="list-group mb-3">
      {% for ln in r.lines.all %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>{{ ln.name_snapshot }} <span class="text-muted">× {{ ln.qty }}</span></div>
          <div>₹ {{ ln.line_total }}</div>
        </li>
      {% empty %}
        <li class="list-group-item text-muted">No lines.</li>
      {% endfor %}
    </ul>
    <div class="d-flex justify-content-between">
      <strong>Subtotal</strong><strong>₹ {{ r.subtotal }}</strong>
    </div>
  {% else %}
    <h6 class="mt-3">Service</h6>
    <div class="border rounded p-2">{{ r.note|default:"Request" }}</div>
    {% if r.subtotal %}<div class="d-flex justify-content-between mt-2">
      <strong>Amount</strong><strong>₹ {{ r.subtotal }}</strong>
    </div>{% endif %}
  {% endif %}
</div>
